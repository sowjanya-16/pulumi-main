@model LC_Reports_V1.Controllers.Del_list

@{
    ViewBag.Title = "HWDamageOEM";
    Layout = "~/Views/Shared/_Layout_SLCockpit.cshtml";
}
<style>
    /* Base for label styling */
    [type="checkbox"]:not(:checked),
    [type="checkbox"]:checked {
        position: absolute;
        left: 0;
        opacity: 0.00;
    }

        [type="checkbox"]:not(:checked) + label,
        [type="checkbox"]:checked + label {
            position: relative;
            padding-left: 2.3em;
            font-size: 1em;
            line-height: 1.7;
            cursor: pointer;
        }

            /* checkbox aspect */
            [type="checkbox"]:not(:checked) + label:before,
            [type="checkbox"]:checked + label:before {
                content: '';
                position: absolute;
                left: 5px;
                top: 4px;
                width: 1em;
                height: 1em;
                border: 1px solid #aaa;
                background: #FFF;
                border-radius: .2em;
                box-shadow: inset 0 1px 3px rgba(0,0,0, .1), 0 0 0 rgba(203, 34, 237, .2);
                -webkit-transition: all .275s;
                transition: all .275s;
            }

            /* checked mark aspect */
            [type="checkbox"]:not(:checked) + label:after,
            [type="checkbox"]:checked + label:after {
                content: '✓';
                position: absolute;
                top: .6em;
                left: .45em;
                font-size: 1.2em;
                color: #b1095c;
                line-height: 0;
                -webkit-transition: all .2s;
                transition: all .2s;
            }

            /* checked mark aspect changes */
            [type="checkbox"]:not(:checked) + label:after {
                opacity: 0;
                -webkit-transform: scale(0) rotate(45deg);
                transform: scale(0) rotate(45deg);
            }

            [type="checkbox"]:checked + label:after {
                opacity: 1;
                -webkit-transform: scale(1) rotate(0);
                transform: scale(1) rotate(0);
            }

    /* Disabled checkbox */
    [type="checkbox"]:disabled:not(:checked) + label:before,
    [type="checkbox"]:disabled:checked + label:before {
        box-shadow: none;
        border-color: #bbb;
        background-color: #e9e9e9;
    }

    [type="checkbox"]:disabled:checked + label:after {
        color: #777;
    }

    [type="checkbox"]:disabled + label {
        color: #aaa;
    }

    /* Accessibility */
    [type="checkbox"]:checked:focus + label:before,
    [type="checkbox"]:not(:checked):focus + label:before {
        box-shadow: inset 0 1px 3px rgba(0,0,0, .1), 0 0 0 6px rgba(203, 34, 237, .2);
    }
        
</style>
<script type="text/javascript">
    $(document).ready(function () {
      
        var obj = @Html.Raw(Json.Encode(Model));
          var oemdate = '@TempData["oem_EndDate"]';
        var title_oem = 'Hardware Damage Cost per OEM ( Till ' + oemdate + ' )';
        document.getElementById("title_foroem").innerHTML = title_oem;
        HWDamageOEM_Chart(obj.hwoem);

        //$('#chkAll').on('click', function () {
        //    var chkAll;
        //    if (this.checked)
        //        chkAll = true;
        //    else
        //        chkAll = false;
        //    if (chkAll) {
        //        //refresh or reloads the page.This method optionally accepts a Boolean parameter true or false.
        //        //If the parameter true is specified, it causes the page to always be reloaded from the server.But, if it is false(which is default ) or not specified, the browser may reload the page from its cache.
        //        location.reload(true);
        //    }

        //    debugger;
        //});
        $('#backButton').dxButton({
            text: 'Back',
            icon: 'chevronleft',
            hint: 'Click here to go back to Default view',
            visible: false,
            onClick() {
              
                this.option('visible', false);
                location.reload(true);
                
            },
        });
        //document.getElementById("backButton").onclick = function (e) {
        //        debugger;
        //        //refresh or reloads the page.This method optionally accepts a Boolean parameter true or false.
        //        //If the parameter true is specified, it causes the page to always be reloaded from the server.But, if it is false(which is default ) or not specified, the browser may reload the page from its cache.
        //        location.reload(true);
         //}
       

        function HWDamageOEM_Chart(data) {
            debugger;

            $("#hwDamage_oemchart").dxChart({

                dataSource: data,
                resolveLabelOverlapping: 'stack',
                color: '#57b8bc',
                //scrollBar: {
                //    visible: true
                //},
                //customizePoint() {
                //    debugger;
                //    if (this.seriesName == EndMonth)
                //        return { color: '#db9a9a', hoverStyle: { color: '#f5a2a2' } };
                //    //if (this.value > 1000) {
                //    //    return { color: '#ff7c7c', hoverStyle: { color: '#ff7c7c' } };
                //    //}
                //    //if (this.value < 500) {
                //    //    return { color: '#8c8cff', hoverStyle: { color: '#8c8cff' } };
                //    //}
                //    return null;
                //},
                argumentAxis: {
                    label: {
                        wordWrap: 'none',
                        overlappingBehavior: 'rotate',
                    },
                },

                //zoomAndPan: {
                //    argumentAxis: "both",

                //},
                ////height: 50,
               // size: {
               //     height: 400,//200,
               //     width: 1200,
               // },
                //title: {
                //    text: title_oem,
                //    font: {
                //        color: "black",
                //        family: "Arial",
                //        size: 20

                //    },
                //},

                commonSeriesSettings: {
                    argumentField: 'OEM',
                    valueField: 'Damage_Cost',
                    //color: '#57b8bc',
                    label: {
                        visible: true,
                        customizeText: function () {
                            return "€" + this.value.toFixed(0);
                        },
                        //backgroundColor:'violet'




                    },
                    type: 'bar',
                    barWidth: 70,

                },
                seriesTemplate: {
                    nameField: 'Month',
                    //color: '#57b8bc'

                },
                //color: '#57b8bc',
                palette: 'Violet',
                //'Dark Moon',
                //'Dark Violet',
                //'Soft Blue',
                //'Ocean',
                //onLegendClick: function (e) {
                //    debugger;
                //    var hiddenPoints, shownPoints;

                //        hiddenPoints = e.component.getSeriesByName("Jan").getAllPoints();
                //    shownPoints = e.target.getAllPoints();
                //    //lastClickedSeriesName = e.target.name;


                //    $.each(shownPoints, function (index, point) {

                //        point.showTooltip();//getLabel().show();
                //    });
                //}  ,
                onLegendClick: function (e) {
                    debugger;
                    $('#backButton')
                        .dxButton('instance')
                        .option('visible', true);

                    //$('#backButton').prop('hidden', false);
                    var series_curr = e.target;

                    //if (series.isVisible()) {
                    //    series.hide();
                    //} else {
                    //    series.show();
                    //}
                    // series.opacity = 1;
                    
                    for (i = 0; i < 12; i++) {
                        if (e.component.series[i].name != series_curr.name) {
                            e.component.series[i].hide();
                        }
                        else {
                            shownPoints = e.target.getAllPoints();
                            e.component.series[i].show();
                            $.each(shownPoints, function (index, point) {
                                debugger;
                                point.showTooltip();//getLabel().show();
                            });

                        }


                    }
                  

                },
                legend: {
                    font: {
                        color: "black",
                        family: "Arial",
                        size: 13

                    },
                    customizeHint: function (e) {
                        debugger;
                        return "Click here for focus view - Hw Damage in " + e.seriesName ;
                    }
                },
                //legend: {
                //    customizeHint: function (e) {
                //        debugger;
                //        e.seriesColor = '#ff7c7c';
                //    }

                //},
                //seriesHoverChanged: function (arg) {
                //    debugger;
                //    return {
                //    text: "Project Team: " + arg.argument + ", Month: " + arg.seriesName + " - " + "€*******" + arg.value.toFixed(0)
                //}
                //},
                //return {
                //    text: "Project Team: " + arg.argument + ", Month: " + arg.seriesName + " - " + "€" + arg.value.toFixed(0)
                //}




                //'Harmony Light',
                //'Soft Blue',
                //'Ocean',
                //commonSeriesSettings: {
                //    argumentField: "OEM",
                //    type: "bar",
                //    hoverMode: "allArgumentPoints",
                //    selectionMode: "allArgumentPoints",
                //    //barPadding: 5,
                //    barWidth: 50,
                //    valueField: "Damage_Cost", //name: "Damage_Cost",
                //    label: {

                //        visible: true,



                //    }


                //},


                //seriesTemplate: {
                //    nameField: 'Month',

                //},

                //series: [

                //    {
                //        valueField: "Damage_Cost", name: "Damage_Cost",
                //        label: {

                //            visible: true,



                //        }
                //    },


                //],





                valueAxis: [


                    {

                        position: 'left',
                        label: {
                            font: {
                                color: "black",
                                family: "Arial",
                                size: 13

                            },
                        },
                        valueMarginsEnabled: false,
                        title: {
                            text: "Cost (in €)",
                            font: {
                                color: "black",
                                family: "Arial",
                                size: 13

                            },
                        },

                        //constantLines: [{
                        //    value: AverageVN_data,
                        //    color: '#1b4f72',
                        //    dashStyle: 'dash',
                        //    width: 2,
                        //    label: { visible: false },
                        //    label: {
                        //        text: 'VN Avg'
                        //    },
                        //}],
                    },


                ],

                //title: 'Hardware Damage per Project Team',

                //export: {
                //    enabled: true,
                //    fileName: "Hardware Damage (Project Teamwise)"
                //},
                //tooltip: {
                //    enabled: true
                //}
                tooltip: {
                    enabled: true,

                    location: "edge",
                    customizeTooltip: function (arg) {
                        debugger;
                        //if (arg.percentText != null)
                        //    return { text: arg.point.data.Location + ":" + arg.valueText + "\n" + arg.point.series.name + ":" + arg.percentText }
                        //else
                        //    return { text: arg.point.data.Location + ":" + arg.valueText }
                        return {
                            text: "Project Team: " + arg.argument + ", Month: " + arg.seriesName + " - " + "€" + arg.value.toFixed(0)
                        }

                    }
                },
            });
        }
    });


</script>
<html>
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GKX0NP1SYR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-GKX0NP1SYR');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="~/Content/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
</head>
<body>
    @*<input type="checkbox" id="chkAll" name="All" value="All"checked/>
        <label for="chkAll" style="padding-right: 10px; background-color:#7fd3d7">All</label>*@
    <div class="button-container"style="display:block">
        <div id="backButton" hidden>
        @*<i class="fa fa-arrow-circle-o-left"></i>
        Back to original view*@
            </div>
    </div>
    <div id="title_foroem"style="color:black;font:20px arial;margin-left:40vw;"></div>
    <h6 style="padding: 5px;width:39vw;border:1px dashed black;"><i class="fa fa-info-circle"></i>   Note: Click on any month at the right for an individual month HW Damage view</h6>
    <div id="hwDamage_oemchart" style="width:95vw;height:60vh; margin:auto;"></div>

</body>
</html>

