@model LC_Reports_V1.Models.AverageMasterDetails

@{
    ViewBag.Title = "WeeklyAverageCharts";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GKX0NP1SYR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-GKX0NP1SYR');
    </script>
    <meta name="viewport" content="width=device-width" />
    <script src="~/Scripts/CPC/LoadCharts.js"></script>
    <title>Index</title>
    @section Scripts{
        <script>
            //var AverageIN, AverageDE, AverageCN, AverageUS, AverageVN, AverageJP;
            var AverageTSG4, AveragePBOX, AverageMLC, AverageACUROT, title;



        $(document).ready(function () {
            localStorage.clear();
            debugger;
            var obj = @Html.Raw(Json.Encode(Model));

            year = '@TempData["year"]';

            if (obj.Loc == "IN")
                title = "RBEI Weekly Average Utilisation per Project (in hrs)"
            else if (obj.Loc == "CN")
                title = "CN Weekly Average Utilisation per Project (in hrs)"
            else if (obj.Loc == "VN")
                title = "VN Weekly Average Utilisation per Project (in hrs)"
            else if (obj.Loc == "JP")
                title = "JP Weekly Average Utilisation per Project (in hrs)"
            else if (obj.Loc == "DE")
                title = "DE Weekly Average Utilisation per Project (in hrs)"
            else if (obj.Loc == "US")
                title = "US Weekly Average Utilisation per Project (in hrs)"


            AverageTSG4 = obj.LocAverage_TSG4[0].LAverage;
            LoadChart_TSG4(obj.PrgAvgIN_TSG4, AverageTSG4, 'TSG4 ' + title, year);

            AveragePBOX = obj.LocAverage_PBOX[0].LAverage;
            LoadChart_PBOX(obj.PrgAvgIN_PBOX, AveragePBOX, 'PBOX ' + title, year);

            AverageMLC = obj.LocAverage_MLC[0].LAverage;
            LoadChart_MLC(obj.PrgAvgIN_MLC, AverageMLC, 'MLC ' + title, year);

            AverageACUROT = obj.LocAverage_ACUROT[0].LAverage;
            LoadChart_ACUROT(obj.PrgAvgIN_ACUROT, AverageACUROT, 'ACUROT ' + title, year);

            SetTempData(year);



            debugger;

        });

            function SetTempData(year) {
                debugger;
                $.ajax({
                    type: "POST",
                    url: "../CPC/SetTempData",
                    //data: '{ year : year }',
                    data: JSON.stringify({ year: year }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "text",
                    success: function (data) {
                        //window.location = window.location.href;
                    }
                });
            }

        </script>
    }
</head>
<body>
    @*<div class="long-title"><center><h3><b>RBEI Weekly Average Utilization per Project (in hrs)</b></h3></center></div>*@
    

    <div id="AvgchartIN_TSG4"></div>
    <div id="AvgchartIN_PBOX"></div>
    <div id="AvgchartIN_MLC"></div>
    <div id="AvgchartIN_ACUROT"></div>
   

</body>
</html>
