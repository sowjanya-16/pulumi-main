
@{
   Layout = "~/Views/Shared/_LayoutPageInventory1.cshtml";
}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head>
    <!-- Google tag (gtag.js) -->
    <script async=async src="https://www.googletagmanager.com/gtag/js?id=G-GKX0NP1SYR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-GKX0NP1SYR');
    </script>
    <meta name="viewport" content="width=device-width" />
    <title>Index1</title>
</head>


<link href="@Url.Content("~/Content/StyleSheet4.css")" rel="stylesheet" type="text/css" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
@*<script src="~/Scripts/HardwareInventory.js"></script>*@

<script type="text/javascript">
    //
    // Tabs Toggler
    //

    $(document).ready(function () {
        var BU_list, OEM_list, Group_list, Item_list, Mode_List;
       // var dataGridHWInventory;
        debugger;
        //Ajax call for getting Lookup data which contains information like BU,OEM 
        $.ajax({

            type: "POST",
            url: "/InventoryLab/Lookup",
            async: false,
            success: onsuccess_lookupdata,
            error: onerror_lookupdata
        })

        $('#tab-1').show();
        $('#tab-2').hide();
        $('#tab-3').hide();
        $('#tab-4').hide();


        $("#b2").click(function () {
            $('#tab-2').show();
            $('#tab-1').hide();
            $('#tab-3').hide();
            $('#tab-4').hide();
            //$("b1").removeClass("active");
            //$("b2").addClass("active");
            $(".active-class a").removeClass("active");
            $(this).addClass("active");
        });

        $("#b3").click(function () {
            $('#tab-3').show();
            $('#tab-1').hide();
            $('#tab-2').hide();
            $('#tab-4').hide();
            $(".active-class a").removeClass("active");
            $(this).addClass("active");
        });

        $("#b4").click(function () {
            $('#tab-4').show();
            $('#tab-1').hide();
            $('#tab-2').hide();
            $('#tab-3').hide();
            $(".active-class a").removeClass("active");
            $(this).addClass("active");
        });

        $("#b1").click(function () {
            $('#tab-1').show();
            $('#tab-2').hide();
            $('#tab-3').hide();
            $('#tab-4').hide();
            $(".active-class a").removeClass("active");
            $(this).addClass("active");
            //$("b1").removeClass("active");
            //$("b2").addClass("active");
        });



        //Ajax call for Mode column
        $.ajax({

            type: "GET",
            url: "/InventoryLab/GetMode",
            async: false,
            success: onsuccess_getMode,
            error: onerror_getMode
        })

        //success function for Lookups
        function onsuccess_lookupdata(response) {

            lookup_data = response.data;
            BU_list = lookup_data.BU_List;
            OEM_list = lookup_data.OEM_List;
            //DEPT_list = lookup_data.DEPT_List;
            Group_list = lookup_data.Groups_test;//Groups_oldList;
            Item_list = lookup_data.Item_List;
            debugger;

        }

        //Success function for Mode 
        function onsuccess_getMode(response) {

            lookup_data = response.data;
            Mode_List = lookup_data;
            debugger;

        }

        //Error function for Lookup
        function onerror_lookupdata(response) {
            alert("Error lookup");
            debugger;
        }

        function onerror_getMode(response) {
            alert("Error Getting Mode Data");

        }
        ajaxCallforHardwareUI()




        //Ajax call to Get Hardware Inventory Data
        function ajaxCallforHardwareUI() {

            $.ajax({
                type: "GET",
                url: encodeURI("../InventoryLab/GetHWData"),
                //data: { },
                success: OnSuccess_GetHardwaredata,
                error: OnError_GetHWData
            });
        }


        function OnSuccess_GetHardwaredata(response) {
            debugger;
            var hwdata;
            hwdata = (response.data);                //Assigning the hardware datalist to the object

            var dataGridHWInventory = $("#HardwareTable").dxDataGrid({

                dataSource: hwdata,
                paging: {
                    pageSize: 100,
                },
                loadPanel: {
                    enabled: true
                },
                hoverStateEnabled: {
                    enabled: true
                },
                columnMinWidth: 50,
                showColumnLines: true,
                showRowLines: true,
                rowAlternationEnabled: true,
                remoteOperations: false,
                searchPanel: {
                    visible: true,
                    highlightCaseSensitive: true,
                },
                groupPanel: { visible: true },
                grouping: {
                    autoExpandAll: false,
                },
                columnFixing: {
                    enabled: true
                },
                editing: {
                    mode: "row",
                    allowUpdating: true,
                    allowDeleting: true,
                    allowAdding: true,
                    useIcons: true
                },
                onToolbarPreparing: function (e) {
                    var dataGrid = e.component;

                    e.toolbarOptions.items[0].showText = 'always';


                },
                width: "1100px", //needed to allow horizontal scroll
                //height: "400px",
                columnAutoWidth: true, //needed to allow horizontal scroll - column area expanding when there are more columns instead of fixed area with conjusted columns
                columnAutoHeight: true,
                remoteOperations: true,
                scrolling: {
                    mode: "virtual",
                    rowRenderingMode: "virtual",
                    columnRenderingMode: "virtual"
                },
                headerFilter: {
                    visible: true,
                    applyFilter: "auto",
                    allowSearching: true
                },
                allowColumnReordering: true,
                rowAlternationEnabled: true,
                showBorders: true,
                onToolbarPreparing: function (e) {
                    var dataGrid = e.component;

                    e.toolbarOptions.items[0].showText = 'always';


                },
                onEditorPreparing: function (e) {
                    var component = e.component,
                        rowIndex = e.row && e.row.rowIndex;//new elements are positioned on the rowindex
                },
                columns: [
                    {
                        type: "buttons",
                        width: 90,
                        alignment: "left",
                        fixed: true,
                        fixedPosition: "left",
                        buttons: [
                            "edit", "delete",
                        ]
                    },
                    {
                        dataField: 'InventoryType',
                        //width: 90,
                        caption: 'Inventory Type',
                        /*dataType: 'string',*/
                    },
                    {
                        dataField: 'SerialNo',
                        //width: 70,
                        caption: 'Serial Number',
                        /*dataType: 'number',*/
                        align: 'left',
                    },
                    {
                        dataField: 'BondNo',
                        //width: 70,
                        caption: 'Bond Number',
                        /*dataType: 'number',*/

                    },
                    {
                        dataField: 'BondDate',
                        caption: 'Bond Date',
                        /*dataType: 'date',*/
                    },
                    {
                        dataField: 'AssetNo',
                        caption: 'Asset Number',
                        /*dataType: 'number',*/
                    },
                    {
                        dataField: 'HardwareResponsible',
                        caption: 'Hardware Responsible',
                        /*dataType: 'string',*/
                    },
                    {
                        dataField: 'HandoverTo',
                        caption: 'Handover To',
                        /*dataType: 'string',*/
                    },
                    {
                        dataField: 'Mode',
                        caption: 'Mode',
                        lookup: {
                            dataSource: Mode_List,
                            displayExpr: 'Mode',
                            valueExpr: 'ID',
                        },
                        /*dataType: 'string',*/
                    },
                    {
                        dataField: 'Remarks',
                        caption: 'Remarks',
                        /*dataType: 'string',*/
                    },
                    {
                        dataField: 'ALMNo',
                        caption: 'ALM Number',
                        /*dataType: 'number',*/
                    },
                    {
                        dataField: 'BU',
                        caption: 'BU',
                        setCellValue: function (rowData, value) {
                            //debugger;
                            rowData.BU = value;
                            rowData.Item_Name = null;

                        },
                        lookup: {
                            dataSource: function (options) {
                                debugger;
                                return {

                                    store: BU_list,
                                };

                            },
                            valueExpr: "ID",
                            displayExpr: "BU"
                        },
                        dataType: 'string',
                    },
                    {
                        dataField: 'OEM',
                        caption: 'OEM',
                        lookup: {
                            dataSource: OEM_list,
                            valueExpr: "ID",
                            displayExpr: "OEM"
                        },
                        /*dataType: 'string',*/
                    },
                    {
                        dataField: 'Group',
                        caption: 'Group',
                        lookup: {
                            dataSource: function (options) {

                                return {

                                    store: Group_list,
                                };

                            },
                            valueExpr: "ID",
                            displayExpr: "Group"
                        },
                        /*dataType: 'string',*/
                    },
                    {
                        dataField: 'ItemName',
                        caption: 'Item Name',
                        dataType: 'string',

                    },
                    {
                        dataField: 'ItemName_Planner',
                        caption: 'Item Name From Planner',
                        lookup: {
                            dataSource: function (options) {
                                debugger;
                                return {
                                    store: Item_list,
                                }
                            },

                            valueExpr: "S_No",
                            displayExpr: "Item_Name"
                        },
                        dataType: 'string',
                        visible: false,
                    },
                    {
                        dataField: 'Qty',
                        caption: 'Quantity',
                        dataType: 'string',
                    },
                    {
                        dataField: 'UOM',
                        caption: 'UOM',
                        dataType: 'string',
                    },
                    {
                        dataField: 'AvailableQty',
                        caption: 'Available Quantity',
                        /*dataType: 'number',*/
                    },
                    {
                        dataField: 'ActualDeliveryDate',
                        caption: 'Actual Delivery Date',
                        /*dataType: 'date',*/
                    },

                ],

            });


        }

        //Error function for get hw data
        function OnError_GetHWData() {
            debugger;
            $("#HardwareTable").prop('hidden', false);
            $.notify("Error in Loading the page", {
                globalPosition: "top center",
                className: "warn"
            })

            //alert("Error")
        }


    });
    debugger;
    //Javascript file for Hardware Inventory


 







</script>

<body>

    <div class="main">
        <div class="site-wrapper">
            <section class="article-wrapper">
                <div class="article-container">
                    <div class="article-block">
                        <div class="entry-content">
                            <h1>Lab Inventory</h1>

                        </div>
                    </div>
                </div>
            </section>
            @*<section class="tabs-wrapper">*@
            @*<div class="tabs-container">*@
            <div id="tabs" class="tabs-block">
                <div id="tabs-section" class="tabs">
                    <ul class="tab-head" id="tabheader">
                        <li class="active-class">
                            <a id="b1" href="#tab-1" class="tab-link active"> <span class="material-icons tab-icon"></span> <span class="tab-label">Hardware</span></a>
                        </li>
                        <li class="active-class">
                            <a id="b2" href="#tab-2" class="tab-link"> <span class="material-icons tab-icon"></span> <span class="tab-label">Labcar</span></a>
                        </li>
                        <li class="active-class">
                            <a id="b3" href="#tab-3" class="tab-link"> <span class="material-icons tab-icon"></span> <span class="tab-label">Software</span></a>
                        </li>
                        <li class="active-class">
                            <a id="b4" href="#tab-4" class="tab-link"> <span class="material-icons tab-icon"></span> <span class="tab-label">Spare</span></a>
                        </li>
                    </ul>

                    <section id="tab-1" class="tab-body entry-content active active-content">
                        <div style="float:left;width:718px">
                            <div id="douter" class="albums">
                                <table id="HardwareTable" class="table table-bordered display compact nowrap cell-border" style="width: 1000px;">
                                </table>
                            </div>
                        </div>

                    </section>

                    <section id="tab-2" class="tab-body entry-content active active-content">
                        <div style="float:left;width:718px">
                            <div id="douter" class="albums">
                                Hello 2
                            </div>
                        </div>

                    </section>

                    <section id="tab-3" class="tab-body entry-content active active-content">
                        <div style="float:left;width:718px">
                            <div id="douter" class="albums">
                                Hello 3
                            </div>
                        </div>

                    </section>

                    <section id="tab-4" class="tab-body entry-content active active-content">
                        <div style="float:left;width:718px">
                            <div id="douter" class="albums">
                                Hello 4
                            </div>
                        </div>

                    </section>
                </div>
            </div>


        </div>
    </div>
</body>

