@model LC_Reports_V1.Controllers.Del_list

@{
    ViewBag.Title = "HCChart_Drilldown";
    Layout = "~/Views/Shared/_Layout_SLCockpit.cshtml";
}

<script type="text/javascript">
    $(document).ready(function () {
        debugger;
        var obj = @Html.Raw(Json.Encode(Model));
        //var employeeData = (IEnumerable<DeliveryStatus>)TempData["DeliveryStatus"];

        var isPlan_Utilize =  '@TempData["isPlan_Utilize"]';

            HC_Grid(obj.hclist);
        debugger;

        function HC_Grid(data) {
            debugger;

            $("#hc_grid").dxPivotGrid({
                //allowSortingBySummary: true,
                allowExpandAll: false,
                allowSorting: false,
                allowFiltering: true,
                showBorders: true,
                showColumnGrandTotals: false,
                showRowGrandTotals: true,
                showRowTotals: false,
                showColumnTotals: false,
                height: 700,
                width: 600,
                //columnWidth: 100,
                headerFilter: { visible: true },
                onCellPrepared: function (e) {
                    debugger;
                    e.cellElement.css('color', '#0000');
                  //  if (e.area === "column" ||( e.area == "row" && e.cell.text == undefined && e.cell.type == undefined)) {
                       
                  //      e.cellElement.css("font-weight", "bold");
                   //     e.cellElement.css("font-size", 15);

                  //  }
                },
                fieldPanel: {
                    //showColumnFields: true,
                    //showDataFields: true,
                    showRowFields: true,
                    visible: function (e) {
                        return true;
                    },
                    showFilterFields: true,
                    allowFieldDragging: true,
                    

                },
                fieldChooser: {
                    enabled: false
                    //applyChangesMode: "instantly"
                },
                export: {
                    enabled: true
                },
                scrolling: {
                    //mode: 'virtual',
                    columnRenderingMode: "virtual"
                },
                //paging: {
                //    enabled: true,
                //    pageSize: 10
                //},
                dataSource: {

                    fields: [
                    //    {
                    //    caption: "Role",
                    //    width: 120,
                    //    dataField: "Role",
                    //    area: "row",
                    //    expanded: true,

                    //},
                    {
                        //caption: "SkillSet",
                        width: 250,
                        dataField: "SkillSetName",
                        area: "row",
                        expanded: true
                    },

                    {
                        dataField: "Year",
                        area: "column",
                        sortBy: "none",
                        //dataType: "date",
                        //customizeText: function (options) {
                        //    return !options.value ? "" : moment(options.value).format("MMM/DD/YYYY").replace(".", "");
                        //},
                        expanded: true

                    },

                    {
                        groupname: "Year",
                        visible: false,
                        expanded: true
                    },
                    {

                        dataField: "Plan",
                        caption: "Plan",
                        dataType: "number",
                        summaryType: "sum",
                        area: "data",
                        visible: true,
                        format: { type: 'fixedPoint', precision: 2 },
                        @*visible: function (e) {
                            debugger;
                            //var isPlan_Utilize = @TempData["isPlan_Utilize"];
                            if (isPlan_Utilize == "Plan")
                                return true;
                            else
                                return false;
                        },*@
                        expanded: true,
                    },
                    {

                        dataField: "Utilize",
                        caption: "Utilize",
                        dataType: "number",
                        summaryType: "sum",
                        area: "data",
                        visible: true,
                        format: { type: 'fixedPoint', precision: 3 },
                        @*visible: function (e) {
                            debugger;
                            //var isPlan_Utilize = @TempData["isPlan_Utilize"];
                            if (isPlan_Utilize == "Utilize")
                                return true;
                            else
                                return false;
                        },*@
                        expanded: true,
                    }
                    ],
                    store: data,
                    @*onFieldsPrepared: function (fields) {
                        //var isPlan_Utilize = @TempData["isPlan_Utilize"];
                        for (var i = 0; i < fields.length; i++) {
                            if (fields[i].dataField != isPlan_Utilize && fields[i].area == "data")
                                fields[i].visible = false;
                        }
                    },*@
                },

            }).dxPivotGrid("instance");
        }
    });
</script>
<html>
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GKX0NP1SYR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-GKX0NP1SYR');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="~/Content/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
</head>
<body>
    <div id="hc_grid_title" style="margin:0 auto; text-align:center; font-size:20px; font-family:Arial; "><b>HeadCount Details</b></div>
    <div id="hc_grid" style="height: 500px;margin:0 auto;"></div>

</body>
</html>